<% content_for :title, "Notes" %>

<div class="recipes-container mx-auto md:w-2/3 w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <div class="flex justify-between items-center">
    <h1 class="font-bold text-4xl">Notes</h1>
    <%= link_to "New note", new_note_path, class: "rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white block font-medium" %>
  </div>

<div data-controller="filter" 
     data-filter-turbo-frame-value="notes_list"
     data-filter-debounce-delay-value="500">
  
  <%= form_with url: notes_path, method: :get, local: false do |f| %>
    <%= f.text_field :search, 
        placeholder: "Search notes...",
        data: { 
          filter_target: "input",
          action: "input->filter#search"
        },
        class: "w-full px-3 py-2 border rounded" %>
  <% end %>
</div>

<%= turbo_frame_tag "notes_list" do %>
  <div class="results-header">


      <span class="count-label text-sm italic text-gray-400">
        <%= pluralize(@notes.count, 'note') %>
        <% if params[:search].present? %>
          found for "<%= params[:search] %>"
        <% end %>
      </span>

  </div>


  <div class="notes-grid">
  
  <% @notes.each do |note| %>
    <%= content_tag :div, note do %>
        <%= render partial: "note", collection: @notes %>
    <% end %>
  <% end %>

<% end %>

</div>